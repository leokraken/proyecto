
@{
    ViewBag.Title = "VerConsultasNew";
    Layout = "~/Views/Shared/_Admin.cshtml";
}

<h3>Consultas</h3>

<link rel="stylesheet" href="~/Content/boostrap-table/src/bootstrap-table.css">
<script src="~/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
@Scripts.Render("~/bundles/jquery")
<script src="~/Content/boostrap-table/src/bootstrap-table.js"></script>
<script src="~/Content/boostrap-table/src/locale/bootstrap-table-es-ES.js"></script>
<script src="~/Content/boostrap-table/src/extensions/filter-control/bootstrap-table-filter-control.js"></script>
<script src="~/Scripts/mustache.js" type="text/javascript"></script>

    <table data-toggle="table" data-url='@Url.Action("GetConsultas", "Consulta")' data-pagination="true" data-side-pagination="client"
       data-page-list="[10, 25, 50, 100, ALL]"  data-row-style="rowStyle" data-sort-order="desc" data-filter-control="true">
    <thead>
        <tr>
            <th data-field="id" data-visible="false">ID</th>
            <th data-field="origen" data-sortable="true" data-filter-control="input">Orígen</th>
            <th data-field="especialidad" data-sortable="true" data-filter-control="input">Especialidad</th>
            <th data-field="medico" data-sortable="true" data-filter-control="input">Médico</th>
            <th data-field="fechaInicio" data-sortable="true" data-filter-control="input">Fecha Inicio</th>
            <th data-field="fechaFin" data-sortable="true" data-filter-control="input">Fecha Fin</th>
            <th data-field="operacion" data-events="operateEvents" data-formatter="operateFormatter" data-align="center"></th>
        </tr>
    </thead>

</table>
<script>
    $(document).ready(function () {

        $(function () {
            $('.datetimepicker').datetimepicker({
                locale: 'es'

            });

        });
    });
</script>
<script>
    function rowStyle(row, index) {
        var classes = ['active', 'success', 'info', 'warning', 'danger'];

        if (index % 2 === 0 ) {
            return {
                classes: classes[2]
            };
        }
        return {};
    }

    window.operateEvents = {
        'click .like': function (e, value, row, index) {

            $('#editarCons').modal('show');

            alert('You click like action, row: ' + JSON.stringify(row));
            
        },
        'click .remove': function (e, value, row, index) {
            $table.bootstrapTable('remove', {
                field: 'id',
                values: [row.id]
            });
        }
    };

    function operateFormatter(value, row, index) {
        return [
            '<a class="like" href="javascript:void(0)" title="Editar">',
            '<i class="glyphicon glyphicon-pencil"></i>',
            '</a>  ',
            '<a class="remove" href="javascript:void(0)" title="Eliminar">',
            '<i class="glyphicon glyphicon-remove"></i>',
            '</a>'
        ].join('');
    }

   
</script>

<div class="modal fade" id="editarCons">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Editar Consulta</h4>
            </div>
            <div class="modal-body">

                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-8 col-md-offset-2">


                            <div class="form-group">
                                <label for="origen" class="control-label col-md-5">Origen:</label>
                                <div>
                                    <div id="origen"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8 col-md-offset-2">
                            <div class="form-group">
                                <label for="especialidad" class="control-label col-md-5">Especialidad:</label>
                                <div>
                                    <div id="esps"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="medico" class="control-label col-md-5">Médico:</label>
                        <div>
                            <div id="meds"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="fIni" class="control-label col-md-5">Fecha Inicio:</label>
                        <div>
                            <input class="form-control datetimepicker" id="fechaIni" placeholder="Seleccione una fecha">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="fFin" class="control-label col-md-5">Fecha Fin:</label>
                        <div>
                            <input class="form-control datetimepicker" id="fechaFin" placeholder="Seleccione una fecha">
                        </div>
                    </div>

                </div>
                    </div>
                </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                            <button type="button" class="btn btn-primary">Guardar Cambios</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->